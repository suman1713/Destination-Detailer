<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Untitled</title>
    <style type="text/css">
        #map{
            height: 100%;
        }
    </style>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Acme">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Actor">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Bungee+Inline">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Miltonian+Tattoo">
    <link rel="stylesheet" href="assets/css/Alex_NavDefault.css">
    <link rel="stylesheet" href="assets/css/dh-navbar-inverse.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.1.1/aos.css">
    <link rel="stylesheet" href="assets/css/Panel-Glass1.css">
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="stylesheet" href="assets/css/THANOS_fullscreen_image_with_text1.css">
</head>

<body>
    <div></div>
    <div>
        <div id="bdiv"></div>
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <nav class="navbar navbar-default navigation-clean navbar-inverse navbar-fixed-top" style="padding:0px;background-color:rgb(58,43,33);height:68px;">
                        <div class="container">
                            <div class="navbar-header">
                                <a class="navbar-brand navbar-link" href="#" style="padding:0px;margin-left:0px;height:78px;"> <img class="img-responsive" src="assets/img/expansion.png" style="font-size:16px;margin:-10px;"></a>
                                <button class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navcol-1"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button>
                            </div>
                            <div class="collapse navbar-collapse" id="navcol-1">
                                <ul class="nav navbar-nav navbar-right" style="margin-top:13px;">
                                    <li role="presentation"><a href="#" uk-scroll="offset:50">Home </a></li>
                                    <li role="presentation"><a href="#empresa" uk-scroll="offset:100">Place1 </a></li>
                                    <li role="presentation"><a href="#areas" uk-scroll="offset:100">Place 2</a></li>
                                    <li role="presentation"><a href="#diferencial" uk-scroll="offset:50">Place 3</a></li>
                                </ul>
                            </div>
                        </div>
                    </nav>
                </div>
            </div>
        </div>
    </div>
    <div style="margin:96px 0px ;">
        <div class="container">
            <div class="row">
                <div class="col-md-10 col-md-offset-1">
                    <div class="glass-panel dark">
                        <div class="panel-glass-content">
                            <h2 style="font-family:'Bungee Inline', cursive;">Weather at  <span id="location_name"></span>: </h2>
                            
                           
                            <p style="font-family:Actor, sans-serif;">
                            <div id="weather">
                                <div class="city"></div>
  <div class="wind"></div>
  <div class="humidity"></div>
  <div class="temp"></div>


                            </div>
                            </p>
                        </div>
                    </div>
                </div>
                <div class="col-md-10 col-md-offset-1">
                    <div class="glass-panel dark">
                        <div class="panel-glass-content">
                            <h2 style="font-family:'Bungee Inline', cursive;">Map of <div id="location_info"></div> </h2>
                             <div id="map">
                                 
                             </div>
                             <div id="map_buttons">
                                 <button class="btn btn-primary btn_search" value="restaurants +in">Restaurants </button>
                                 <button class="btn btn-primary btn_search" value="bars+in">Bars</button>
                                 <button class="btn btn-primary btn_search" value="amusement+parks+in">Amusement Parks</button>
                                 <button class="btn btn-primary btn_search" value="parks+in">Parks</button>
                                 <button class="btn btn-primary btn_search" value="local+attractions+in">Surprise Me!!</button>
                             </div>
                            <p style="font-family:Actor, sans-serif;">




                             </p>
                        </div>
                    </div>
                </div>
                <div class="col-md-10 col-md-offset-1">
                    <div class="glass-panel dark">
                        <div class="panel-glass-content">
                            <h2 style="font-family:'Bungee Inline', cursive;">General Information: </h2>
                            <p style="font-family:Actor, sans-serif;">
                                <div id="article"></div>




                            </p>
                        </div>
                    </div>
                </div>

                <div class="col-md-10 col-md-offset-1">
                    <div class="glass-panel dark">
                        <div class="panel-glass-content">
                            <h2 style="font-family:'Bungee Inline', cursive;">Events:</h2>
                            <p style="font-family:Actor, sans-serif;">
                                <div id="event"></div>




                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/js/bs-animation.js"></script>
    <script src="assets/js/homepage.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.1.1/aos.js"></script>


     <script type="text/javascript">
//weather api
   var APIKey = "166a433c57516f51dfab1f7edaed8413";
    var queryURL = "http://api.openweathermap.org/data/2.5/weather?" +
      "q="+localStorage.getItem('searched_place')+"&units=imperial&appid=" + APIKey;

   console.log(queryURL);

   $.ajax({
        url: queryURL,
        method: "GET"
      })
      .done(function(data) {
        
    

       
        $(".wind").html("Wind Speed: " + data.wind.speed);
        $(".humidity").html("Humidity: " + data.main.humidity);
        $(".temp").html("Temperature Max(F) " + data.main.temp_max + "Temperature Min(F) " + data.main.temp_min +"Temperature Average(F) " + data.main.temp);

      
      
      });
  </script>
    

    <script type="text/javascript">

        var searched_place=localStorage.getItem('searched_place');        
        $("#location_name").html(searched_place);

        //getting place id long lat
        var queryURL = "https://maps.googleapis.com/maps/api/geocode/json?address="+searched_place+"&key=AIzaSyAxpdRysjZVoX9G1D-yCp8VOaAEEfGZkzs";

        $.ajax({
          url: queryURL,
          method: "GET"
        }).done(function(response) {
          $("#location_info").html(response.results[0].formatted_address);
          console.log(response.results);
          console.log(response.results[0].formatted_address);
           console.log(response.results[0].place_id);
           console.log(response.results[0].geometry.location.lat);
           console.log(response.results[0].geometry.location.lng);
           console.log('resturants+in+'+searched_place);
            $("#map").html('<iframe width="100%" height="450" frameborder="0" style="border:0" src="https://www.google.com/maps/embed/v1/place?key=AIzaSyBgsvmK2qgF1vTBiJP1fZDoIFhBeny1zmE&q=place_id:'+ response.results[0].place_id+'" allowfullscreen></iframe>');

            $(".btn_search").click( function(){
                var temp=($(this).val());
                $("#map").html('<iframe width="100%" height="450" frameborder="0" style="border:0" src="https://www.google.com/maps/embed/v1/search?key=AIzaSyBgsvmK2qgF1vTBiJP1fZDoIFhBeny1zmE&q='+ temp + searched_place+'" allowfullscreen></iframe>');
                

            });
          
        });

       



    </script>

    <script type="text/javascript">

   
          var x = localStorage.getItem('searched_place'); 
          var form = "http://en.wikipedia.org/w/api.php?action=parse&format=json&prop=text&section=0&page=" + x + "&callback=?";
        
        $.ajax({
            type: "GET",
            url: form,
            contentType: "application/json; charset=utf-8",
            async: false,
            dataType: "json",
            success: function (data, textStatus, jqXHR) {
        
                var markup = data.parse.text["*"];
                var cleaner = markup.replace(/<img[^>]*>/gi,"");
                var i = $('<div></div>').html(cleaner);
        
                //remove links
                i.find('a').each(function() { $(this).replaceWith($(this).html()); });
        
                //remove references
                i.find('sup').remove();
        
                //remove cite error
        i.find('.mw-ext-cite-error').remove();
        
        $('#article').html($(i).find('p'));
            
        },
        error: function (errorMessage) {
        }
    });    

       
</script>

       




<script type="text/javascript">
//eventful api
          var x = localStorage.getItem('searched_place'); 

   var APIKey = "4vnDGKRSbtdZPfHj";
    var queryURL = "http://api.eventful.com/json/events/search?app_key=4vnDGKRSbtdZPfHj&location="+x;

   console.log(queryURL);

   $.ajax({
        url: queryURL,
        method: "GET",
        crossDomain: true,
        dataType: 'jsonp'
        
      })
      .done(function(data) {
        console.log(queryURL);
        
         
       
            for(var i=0;i<=10;i++){
                if(data.events.event[i].image=== null){
                    var url='https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQMQiLw9VYuRHm9QZBVXsjQteD3iU0pQFnety7ZB2hBBVn30FaFFdVFzH4E';

                }else{
                var url=data.events.event[i].image.thumb.url;}

                 $("#event").append("<div class='panel panel-default' style='margin:10px; color:black;'><div class='panel-heading'><h3 class='text-success panel-title'><a href='"+data.events.event[i].url+"'>"+data.events.event[i].title+"</a></h3></div><div class='panel-body'> <div id='eventimage' style='display:inline;'><img src='"+url+"' style='height: 60px; width:60px;'/></div><div id='text-description' style='overflow: scroll; height:6em;'>"+data.events.event[i].description+" </div><div id='starttime'>Starts:"+data.events.event[i].start_time+"<br>Venue:"+data.events.event[i].venue_address+"</div></div>");


                 

            };



                           
           




        


      
      
      });

     
  </script>



    
   
</body>

</html>