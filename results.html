<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Untitled</title>
    <style type="text/css">
        #map{
            height: 100%;
        }
    </style>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Acme">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Actor">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Bungee+Inline">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Miltonian+Tattoo">
    col
    <link rel="stylesheet" href="assets/css/dh-navbar-inverse.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.1.1/aos.css">
    <link rel="stylesheet" href="assets/css/Panel-Glass1.css">
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="stylesheet" href="assets/css/THANOS_fullscreen_image_with_text1.css">
</head>

<body>
    <div></div>
    <div>
        <div id="bdiv"></div>
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <nav class="navbar navbar-default navigation-clean navbar-inverse navbar-fixed-top" style="padding:0px;background-color:rgb(58,43,33);height:68px;">
                        <div class="container">
                            <div class="navbar-header">
                                <a class="navbar-brand navbar-link" href="#" style="padding:0px;margin-left:0px;height:78px;"> <img class="img-responsive" src="assets/img/expansion.png" style="font-size:16px;margin:-10px;"></a>
                                <button class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navcol-1"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button>
                            </div>
                            <div class="collapse navbar-collapse" id="navcol-1">
                                <ul class="nav navbar-nav navbar-right" style="margin-top:13px;">
                                    <li role="presentation"><a href="index.html" uk-smooth-scroll="offset:50">Home </a></li>
                                   
                                    <li role="presentation"><a href="#article" uk-smooth-scroll="offset:100">Information</a></li>
                                    <li role="presentation"><a href="#event" uk-smooth-scroll="offset:">Local Events</a></li>
                                </ul>
                            </div>
                        </div>
                    </nav>
                </div>
            </div>
        </div>
    </div>
    <div style="margin:96px 0px ;">
        <div class="container">
            <div class="row">
                <div class="col-md-10 col-md-offset-1">
                    <div class="glass-panel dark">
                        <div class="panel-glass-content" style="overflow: auto;">
                            <h2 style="font-family:'Bungee Inline', cursive;">Weather at  <span id="location_name"></span>: </h2>
                            
                           
                            <p style="font-family:Actor, sans-serif;">
                            <div class="row">
                            <div id="weather col-md-6">
                            <div class="icon"></div>
                                <div class="city"></div>
                                  <div class="weather" ></div>
                                  <div class="humidity"></div>
                                  <div class="temp"></div></div>
                                  <div class="forecast col-md-6" >
                                      <div class="forecast_item"><h2>Next 7 days</h2>
                                      <div class="forecast_image" >
                                      <div class="forecast_data" ></div>
                                      
                                      

                                      
                                          
                                          
                                      </div>
                                  </div>


                            </div>
                            </p>
                        </div>
                    </div></div>
                </div>
                <div class="col-md-10 col-md-offset-1">
                    <div class="glass-panel dark">
                        <div class="panel-glass-content">
                            <h2 style="font-family:'Bungee Inline', cursive;">Map of <div id="location_info"></div> </h2>
                             <div id="map">
                                 
                             </div>
                             <div id="map_buttons">
                                 <button class="btn btn-primary btn_search" value="restaurants +in">Restaurants </button>
                                 <button class="btn btn-primary btn_search" value="bars+in">Bars</button>
                                 <button class="btn btn-primary btn_search" value="amusement+parks+in">Amusement Parks</button>
                                 <button class="btn btn-primary btn_search" value="parks+in">Parks</button>
                                 <button class="btn btn-primary btn_search" value="local+attractions+in">Surprise Me!!</button>
                             </div>
                            <p style="font-family:Actor, sans-serif;">




                             </p>
                        </div>
                    </div>
                </div>
                <div class="col-md-10 col-md-offset-1">
                    <div class="glass-panel dark">
                        <div class="panel-glass-content">
                            <h2 style="font-family:'Bungee Inline', cursive;">General Information: </h2>
                            <p style="font-family:Actor, sans-serif;">
                                <div id="article"></div>




                            </p>
                        </div>
                    </div>
                </div>

                <div class="col-md-10 col-md-offset-1">
                    <div class="glass-panel dark">
                        <div class="panel-glass-content">
                            <h2 style="font-family:'Bungee Inline', cursive;">Events:</h2>
                            <p style="font-family:Actor, sans-serif;">
                                <div id="event"></div>





                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/js/bs-animation.js"></script>
    <script src="assets/js/homepage.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.1.1/aos.js"></script>


     <script type="text/javascript">
//weather api
   var APIKey = "166a433c57516f51dfab1f7edaed8413";
    var queryURL = "https://api.openweathermap.org/data/2.5/weather?" +
      "q="+localStorage.getItem('searched_place')+"&units=imperial&appid=" + APIKey;
      var queryURL2 = "https://api.openweathermap.org/data/2.5/forecast/daily?" +
      "q="+localStorage.getItem('searched_place')+"&units=imperial&appid=" + APIKey;

   console.log(queryURL);

   $.ajax({
        url: queryURL,
        method: "GET"
      })
      .done(function(data) {
        
        var iconCode = data.weather[0].icon;
        var iconUrl = "https://openweathermap.org/img/w/" + iconCode + ".png";

        $(".icon").html("<img style='float:right; height:80px;' src='"+ iconUrl + "'>");
        $(".weather").html("<h1>" + data.weather[0].main+"</h1>");
        $(".humidity").html("Humidity: " + data.main.humidity+"%");
        $(".temp").html("<h1> " + data.main.temp+" °F</h1> <p>Max: " + data.main.temp_max + "    Min:" + data.main.temp_min+"</p>" );

      
      
      });

      $.ajax({
        url: queryURL2,
        method: "GET"
      })
      .done(function(data) {
        for (var i=0; i<=7;i++){
        var iconCode = data.list[i].weather[0].icon;
        var des=data.list[i].weather[0].description;
        des=des.toUpperCase();
        var iconUrl = "https://openweathermap.org/img/w/" + iconCode + ".png";
        console.log(data.list[i].weather[0].description);
        $(".forecast_image").append("<h2 style='display:inline;' >"+ data.list[i].temp.day +"°F   </h2><img style='height:80px' src='"+ iconUrl + "'><h4  style='display:inline;' >"+des+" </h4>   Humidity: "+data.list[i].humidity+"% <br>");
       
      };
      
      });
  </script>
    

    <script type="text/javascript">

        var searched_place=localStorage.getItem('searched_place');        
        $("#location_name").html(searched_place);

        //getting place id long lat
        var queryURL = "https://maps.googleapis.com/maps/api/geocode/json?address="+searched_place+"&key=AIzaSyAxpdRysjZVoX9G1D-yCp8VOaAEEfGZkzs";

        $.ajax({
          url: queryURL,
          method: "GET"
        }).done(function(response) {
          $("#location_info").html(response.results[0].formatted_address);
          console.log(response.results);
          console.log(response.results[0].formatted_address);
           console.log(response.results[0].place_id);
           console.log(response.results[0].geometry.location.lat);
           console.log(response.results[0].geometry.location.lng);
           console.log('resturants+in+'+searched_place);
            $("#map").html('<iframe width="100%" height="450" frameborder="0" style="border:0" src="https://www.google.com/maps/embed/v1/place?key=AIzaSyBgsvmK2qgF1vTBiJP1fZDoIFhBeny1zmE&q=place_id:'+ response.results[0].place_id+'" allowfullscreen></iframe>');

            $(".btn_search").click( function(){
                var temp=($(this).val());
                $("#map").html('<iframe width="100%" height="450" frameborder="0" style="border:0" src="https://www.google.com/maps/embed/v1/search?key=AIzaSyBgsvmK2qgF1vTBiJP1fZDoIFhBeny1zmE&q='+ temp + searched_place+'" allowfullscreen></iframe>');
                

            });
          
        });

       



    </script>

    <script type="text/javascript">

   
          var x = localStorage.getItem('searched_place'); 
          var form = "https://en.wikipedia.org/w/api.php?action=parse&format=json&prop=text&section=0&page=" + x + "&callback=?";
        
        $.ajax({
            type: "GET",
            url: form,
            contentType: "application/json; charset=utf-8",
            async: false,
            dataType: "json",
            success: function (data, textStatus, jqXHR) {
        
                var markup = data.parse.text["*"];
                var cleaner = markup.replace(/<img[^>]*>/gi,"");
                var i = $('<div></div>').html(cleaner);
        
                //remove links
                i.find('a').each(function() { $(this).replaceWith($(this).html()); });
        
                //remove references
                i.find('sup').remove();
        
                //remove cite error
        i.find('.mw-ext-cite-error').remove();
        
        $('#article').html($(i).find('p'));
            
        },
        error: function (errorMessage) {
        }
    });    

       
</script>

       




<script type="text/javascript">
//eventful api
          var x = localStorage.getItem('searched_place'); 

   var APIKey = "4vnDGKRSbtdZPfHj";
    var queryURL = "http://api.eventful.com/json/events/search?app_key=4vnDGKRSbtdZPfHj&location="+x;

   console.log(queryURL);

   $.ajax({
        url: queryURL,
        method: "GET",
        crossDomain: true,
        dataType: 'jsonp'
        
      })
      .done(function(data) {
        console.log(queryURL);
        
         
       
            for(var i=0;i<=10;i++){
                if(data.events.event[i].image=== null){
                    var url='https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQMQiLw9VYuRHm9QZBVXsjQteD3iU0pQFnety7ZB2hBBVn30FaFFdVFzH4E';

                }else{
                var url=data.events.event[i].image.thumb.url;}

                if(data.events.event[i].description=== null){
                    var description='No Description Available';

                }else{
                var description=data.events.event[i].description;}

                 $("#event").append("<div class='panel panel-default' style='margin:10px; color:black;'><div class='panel-heading'><h3 class='text-success panel-title'><a href='"+url+"'>"+data.events.event[i].title+"</a></h3></div><div class='panel-body'> <div id='eventimage' style='display:inline;'><img src='"+url+"' style='height: 60px; width:60px ;'/>Starts:"+data.events.event[i].start_time+"<br>Venue:"+data.events.event[i].venue_address+"</div></div><div id='text-description' style='overflow: auto; height:6em;'><p>"+description+"</p></div><p><a href='"+data.events.event[i].url+"'> Learn More</p>");


                 

            };



                           
           




        


      
      
      });

     
  </script>



    
   
</body>

</html>